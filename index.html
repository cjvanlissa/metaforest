<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Exploring Heterogeneity in Meta-Analysis using Random Forests • metaforest</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Exploring Heterogeneity in Meta-Analysis using Random Forests">
<meta name="description" content="Conduct random forests-based meta-analysis, obtain partial dependence plots for metaforest and classic meta-analyses, and cross-validate and tune metaforest- and classic meta-analyses in conjunction with the caret package. A requirement of classic meta-analysis is that the studies being aggregated are conceptually similar, and ideally, close replications. However, in many fields, there is substantial heterogeneity between studies on the same topic. Classic meta-analysis lacks the power to assess more than a handful of univariate moderators. MetaForest, by contrast, has substantial power to explore heterogeneity in meta-analysis. It can identify important moderators from a larger set of potential candidates (Van Lissa, 2020). This is an appealing quality, because many meta-analyses have small sample sizes. Moreover, MetaForest yields a measure of variable importance which can be used to identify important moderators, and offers partial prediction plots to explore the shape of the marginal relationship between moderators and effect size.">
<meta property="og:description" content="Conduct random forests-based meta-analysis, obtain partial dependence plots for metaforest and classic meta-analyses, and cross-validate and tune metaforest- and classic meta-analyses in conjunction with the caret package. A requirement of classic meta-analysis is that the studies being aggregated are conceptually similar, and ideally, close replications. However, in many fields, there is substantial heterogeneity between studies on the same topic. Classic meta-analysis lacks the power to assess more than a handful of univariate moderators. MetaForest, by contrast, has substantial power to explore heterogeneity in meta-analysis. It can identify important moderators from a larger set of potential candidates (Van Lissa, 2020). This is an appealing quality, because many meta-analyses have small sample sizes. Moreover, MetaForest yields a measure of variable importance which can be used to identify important moderators, and offers partial prediction plots to explore the shape of the marginal relationship between moderators and effect size.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">metaforest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/Introduction_to_metaforest.html">Introduction to metaforest</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cjvanlissa/metaforest/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="metaforest-">MetaForest <a href="https://cjvanlissa.github.io/metaforest/"><img src="https://github.com/cjvanlissa/metaforest/raw/master/docs/metaforest_icon.png" align="right" height="139"></a>
<a class="anchor" aria-label="anchor" href="#metaforest-"></a>
</h1></div>
<!-- badges: start -->

</div>
<div class="section level1">
<h1 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h1>
<p>The goal of MetaForest is to explore heterogeneity in meta-analytic data, identify important moderators, and explore the functional form of the relationship between moderators and effect size. To do so, MetaForest conducts a weighted random forest analysis, using random-effects or fixed-effects weights, as in classic meta-analysis, or uniform weights (unweighted random forest). Simulation studies have demonstrated that this technique has substantial power to detect relevant moderators, even in datasets as small as 20 cases (based on cross-validated <em>R</em><sup>2</sup>). Using a variable importance plot, important moderators can be identified, and using partial prediction plots, the shape of the marginal relationship between moderators and effect size can be visualized. MetaForest can be readily integrated in classical meta-analytic approaches: If MetaForest is conducted as a primary analysis, classic meta-analysis can be used to quantify heterogeneity (in fact, MetaForest by default reports a random-effects meta-analysis on the raw data, and the residuals of the random forests analysis), or to provide a simplified representation of the linear effects of important predictors. Conversely, a theory-driven classical meta-analysis could be complemented by an exploratory MetaForest analysis, as a final check to ensure that important moderators have not been overlooked. We hope that this approach will be of use to researchers, and that the availability of user-friendly R functions will facilitate its adoption.</p>
</div>
<div class="section level1">
<h1 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h1>
<p>You can install <code>metaforest</code> from CRAN with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"metaforest"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h1>
<p>Every user-facing function in the package is documented, and the documentation can be accessed by running <code>?function_name</code> in the R console, e.g., <code>?graph</code>, or by checking the <a href="https://cjvanlissa.github.io/metaforest/reference/index.html">project website</a></p>
</div>
<div class="section level1">
<h1 id="citing-metaforest">Citing metaforest<a class="anchor" aria-label="anchor" href="#citing-metaforest"></a>
</h1>
<p>You can cite the method by referencing this open access book chapter:</p>
<p>Van Lissa, C. J. (2020). Small sample meta-analyses: Exploring heterogeneity using MetaForest. In R. Van De Schoot &amp; M. Miočević (Eds.), <em>Small Sample Size Solutions (Open Access): A Guide for Applied Researchers and Practitioners.</em> CRC Press. <a href="https://doi.org/10.4324/9780429273872-16" class="external-link uri">https://doi.org/10.4324/9780429273872-16</a></p>
<p>The simulation study supporting the method is available in:</p>
<p>Van Lissa, C. J. (2018). MetaForest: Exploring heterogeneity in meta-analysis using random forests. PsyArxiv. <a href="https://doi.org/10.31234/osf.io/myg6s" class="external-link uri">https://doi.org/10.31234/osf.io/myg6s</a></p>
</div>
<div class="section level1">
<h1 id="contributing-and-contact-information">Contributing and Contact Information<a class="anchor" aria-label="anchor" href="#contributing-and-contact-information"></a>
</h1>
<p>If you have ideas, please get involved. You can contribute by opening an issue on GitHub, or sending a pull request with proposed features.</p>
<ul>
<li>File a GitHub issue <a href="https://github.com/cjvanlissa/metaforest" class="external-link">here</a>
</li>
<li>Make a pull request <a href="https://github.com/cjvanlissa/metaforest/pulls" class="external-link">here</a>
</li>
</ul>
<p>By participating in this project, you agree to abide by the <a href="https://www.contributor-covenant.org/" class="external-link">Contributor Code of Conduct v2.0</a>. Contributions to the package must adhere to the <a href="https://style.tidyverse.org/" class="external-link">tidyverse style guide</a>. When contributing code, please add tests for that contribution to the <code>tests/testthat</code> folder, and ensure that these tests pass in the <a href="https://github.com/cjvanlissa/worcs/actions/workflows/R-CMD-check" class="external-link">GitHub Actions panel</a>.</p>
</div>
<div class="section level1">
<h1 id="example-analysis">Example analysis<a class="anchor" aria-label="anchor" href="#example-analysis"></a>
</h1>
<p>This example demonstrates how one might go about conducting a meta-analysis using MetaForest. For more information, check the <a href="https://cjvanlissa.github.io/metaforest/articles/Introduction_to_metaforest.html">package vignette</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Load metaforest package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cjvanlissa.github.io/metaforest/">metaforest</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Simulate a meta-analysis dataset with 20 studies, 1 relevant moderator, and 4 irrelevant moderators</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/SimulateSMD.html">SimulateSMD</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">training</span></span>
<span></span>
<span><span class="co">#Conduct an unweighted MetaForest analysis, to estimate the residual tau2</span></span>
<span><span class="va">mf.unif</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/MetaForest.html">MetaForest</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">yi</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">data</span>,</span>
<span>                      whichweights <span class="op">=</span> <span class="st">"unif"</span>, method <span class="op">=</span> <span class="st">"DL"</span>, num.trees <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Extract the result of this analysis and print them</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mf.unif</span><span class="op">)</span></span>
<span><span class="va">results</span></span>
<span><span class="co">#&gt; MetaForest results</span></span>
<span><span class="co">#&gt;                                          </span></span>
<span><span class="co">#&gt; Type of analysis:              MetaForest</span></span>
<span><span class="co">#&gt; Number of studies:             20        </span></span>
<span><span class="co">#&gt; Number of moderators:          5         </span></span>
<span><span class="co">#&gt; Number of trees in forest:     2000      </span></span>
<span><span class="co">#&gt; Candidate variables per split: 2         </span></span>
<span><span class="co">#&gt; Minimum terminal node size:    5         </span></span>
<span><span class="co">#&gt; OOB prediction error (MSE):    0.1012    </span></span>
<span><span class="co">#&gt; R squared (OOB):               0.2970    </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Tests for Heterogeneity: </span></span>
<span><span class="co">#&gt;                                tau2   tau2_SE I^2     H^2    Q-test  df Q_p   </span></span>
<span><span class="co">#&gt; Raw effect sizes:              0.0553 0.0486  37.2642 1.5940 30.2857 19 0.0483</span></span>
<span><span class="co">#&gt; Residuals (after MetaForest):  0.0099 0.0334  9.6420  1.1067 21.0275 19 0.3353</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Random intercept meta-analyses:</span></span>
<span><span class="co">#&gt;                                Intercept se     ci.lb   ci.ub   p     </span></span>
<span><span class="co">#&gt; Raw effect sizes:              -0.2136   0.0875 -0.3851 -0.0421 0.0147</span></span>
<span><span class="co">#&gt; Residuals (after MetaForest):  0.0357    0.0720 -0.1053 0.1768  0.6197</span></span>
<span></span>
<span><span class="co">#Conduct a weighted MetaForest analysis, using the residual tau2 from the</span></span>
<span><span class="co">#unweighted analysis above</span></span>
<span><span class="va">mf.random</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/MetaForest.html">MetaForest</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="va">yi</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">data</span>,</span>
<span>                      whichweights <span class="op">=</span> <span class="st">"random"</span>, method <span class="op">=</span> <span class="st">"DL"</span>, </span>
<span>                      tau2 <span class="op">=</span> <span class="va">results</span><span class="op">$</span><span class="va">rma</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">]</span>,</span>
<span>                      num.trees <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Print the result of this analysis</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mf.random</span><span class="op">)</span></span>
<span><span class="co">#&gt; MetaForest results</span></span>
<span><span class="co">#&gt;                                          </span></span>
<span><span class="co">#&gt; Type of analysis:              MetaForest</span></span>
<span><span class="co">#&gt; Number of studies:             20        </span></span>
<span><span class="co">#&gt; Number of moderators:          5         </span></span>
<span><span class="co">#&gt; Number of trees in forest:     2000      </span></span>
<span><span class="co">#&gt; Candidate variables per split: 2         </span></span>
<span><span class="co">#&gt; Minimum terminal node size:    5         </span></span>
<span><span class="co">#&gt; OOB prediction error (MSE):    0.0945    </span></span>
<span><span class="co">#&gt; R squared (OOB):               0.3438    </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Tests for Heterogeneity: </span></span>
<span><span class="co">#&gt;                                tau2   tau2_SE I^2     H^2    Q-test  df Q_p   </span></span>
<span><span class="co">#&gt; Raw effect sizes:              0.0553 0.0486  37.2642 1.5940 30.2857 19 0.0483</span></span>
<span><span class="co">#&gt; Residuals (after MetaForest):  0.0031 0.0312  3.2094  1.0332 19.6300 19 0.4171</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Random intercept meta-analyses:</span></span>
<span><span class="co">#&gt;                                Intercept se     ci.lb   ci.ub   p     </span></span>
<span><span class="co">#&gt; Raw effect sizes:              -0.2136   0.0875 -0.3851 -0.0421 0.0147</span></span>
<span><span class="co">#&gt; Residuals (after MetaForest):  0.0298    0.0693 -0.1059 0.1656  0.6666</span></span></code></pre></div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=metaforest" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/cjvanlissa/metaforest/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/cjvanlissa/metaforest/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing metaforest</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Caspar J. Van Lissa <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-0808-5024" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=metaforest" class="external-link"><img src="https://www.r-pkg.org/badges/version/metaforest" alt="CRAN status"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing" class="external-link"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="lifecycle"></a></li>
<li><a href="https://github.com/cjvanlissa/metaforest/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/cjvanlissa/metaforest/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Caspar J. Van Lissa.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
